function onClick(a){{var b,c=$("#priceChart").igDataChart("option","gridAreaRect");$("#priceChart").igDataChart("unscaleValue","xAxis",c.left),{left:$("#priceChart").igDataChart("option","windowRect")?$("#priceChart").igDataChart("option","windowRect").left:35,width:$("#priceChart").igDataChart("option","windowRect")?$("#priceChart").igDataChart("option","windowRect").width:30}}("day"===a||"weekly"===a||"monthly"===a||"quaterly"===a)&&(b=100,newLeft=100),igFinance.changeTicker(window.selectedSymbol),$("#zoom").igZoombar("zoom",newLeft,b)}function unique(a){var b=[];return $.each(a,function(a,c){-1===$.inArray(c,b)&&b.push(c)}),b}performancedatearr=[],performancetimearr=[],$("#ticker").change(function(){window.trendLineType="none",window.trendLinePeriod="",igFinance.changeTicker($(this).val())});var wdispflag=!1;$("#txtTicker").autocomplete({source:function(a,b){var c=a.term;$.ajax({type:"GET",url:"http://d.yimg.com/autoc.finance.yahoo.com/autoc",data:{query:c},dataType:"jsonp",jsonp:"callback",jsonpCallback:"YAHOO.Finance.SymbolSuggest.ssCallback"}),YAHOO.Finance.SymbolSuggest.ssCallback=function(a){var c=[];$.each(a.ResultSet.Result,function(a,b){c.push({label:b.name+"("+b.symbol+")",value:b.symbol})}),b(c)}},minLength:1,select:function(a,b){$("#txtTicker").val(b.item.value.split("#")[0]),wdispflag=!1,$(".watchchartsymb").each(function(){symbol=$(this).attr("data-symbol"),name=$(this).attr("data-name"),b.item.value.split("#")[0]===symbol?(console.log(name+" ( "+symbol+" )"),$(".watchchartsymb").removeClass("watchSelected"),$(this).addClass("watchSelected"),$(".watDisplay").html(name+" ( "+symbol+" ) "),wdispflag=!0):wdispflag||($(".watchchartsymb").removeClass("watchSelected"),$(".watDisplay").html(""))}),window.trendLineType="none",window.trendLinePeriod="",igFinance.changeTicker(b.item.value.split("#")[0])}}),$("#YhFinanceSrch").submit(function(a){a.preventDefault(),window.trendLineType="none",window.trendLinePeriod="",window.seriesTypes="first",igFinance.changeTicker($("#txtTicker").val()),wdispflag=!1,$(".watchchartsymb").each(function(){symbol=$(this).attr("data-symbol"),name=$(this).attr("data-name"),$("#txtTicker").val()===symbol?(console.log(name+" ( "+symbol+" )"),$(".watchchartsymb").removeClass("watchSelected"),$(this).addClass("watchSelected"),$(".watDisplay").html(name+" ( "+symbol+" )"),wdispflag=!0):wdispflag||($(".watchchartsymb").removeClass("watchSelected"),$(".watDisplay").html(""))})}),$(".zoomMinus").click(function(a){a.preventDefault(),newWidth=$("#priceChart").igDataChart("option","windowRect").width,newLeft=$("#priceChart").igDataChart("option","windowRect").left,$("#zoom").igZoombar("zoom",100,100*newWidth+10)}),$(".zoomPlus").click(function(a){a.preventDefault(),newWidth=$("#priceChart").igDataChart("option","windowRect").width,newLeft=$("#priceChart").igDataChart("option","windowRect").left,$("#zoom").igZoombar("zoom",100,100*newWidth-10)}),$(".rangetype li").click(function(a){$(".rangetype li").removeClass("selectedPrlist"),$(this).addClass("selectedPrlist"),str=$(this).attr("value"),$(".price-stock").html($(this).attr("msgDisp")),window.seriesTypes=str,onClick(str),a.stopPropagation()}),$(".off-button").show(),$(".vol-off").click(function(){window.volumeOpen="yes",$(".off-button").show(),$(".on-button").hide(),$("#volumeChart").slideDown("slow"),window.trendLineType="none",window.trendLinePeriod="",igFinance.changeTicker(window.selectedSymbol)}),$(".vol-on").click(function(){window.volumeOpen="no",$(".on-button").show(),$(".off-button").hide(),$("#volumeChart").slideUp("slow"),window.trendLineType="none",window.trendLinePeriod="",igFinance.changeTicker(window.selectedSymbol)}),$(".listing-graph, .lists li").click(function(){$(".lists").slideToggle("slow")}),$(".vol-graph").click(function(){var a=$(this).attr("data-status");newStatus="on"===a?"off":"on","on"===a?($(this).attr("data-status","off"),$(this).css("background-position","0 100%"),window.volumeOpen="no",$("#volumeChart").slideUp("slow"),window.trendLineType="none",window.trendLinePeriod="",igFinance.changeTicker(window.selectedSymbol)):($(this).attr("data-status","on"),$(this).css("background-position","0 0"),window.volumeOpen="yes",window.trendLineType="none",window.trendLinePeriod="",$("#volumeChart").slideDown("slow"),igFinance.changeTicker(window.selectedSymbol))}),window.tradesymbcount=0,$(".pre-next .left-part").click(function(){totallngth=parseInt($(".tradetable ul").length-1),window.tradesymbcount--,window.tradesymbcount=window.tradesymbcount<=0?totallngth:window.tradesymbcount>totallngth?1:window.tradesymbcount,slctsymb=$(".tradetable ul").eq(window.tradesymbcount).find(".tradetablesymb").text(),window.selectedSymbol=""!==slctsymb?slctsymb:null!==slctsymb?slctsymb:window.selectedSymbol,window.seriesTypes="first",window.trendLineType="none",window.trendLinePeriod="",(""!==window.selectedSymbol||null!==window.selectedSymbol)&&igFinance.changeTicker(window.selectedSymbol)}),$(".pre-next .right-part").click(function(){totallngth=parseInt($(".tradetable ul").length-1),window.tradesymbcount++,window.tradesymbcount=window.tradesymbcount<=0?totallngth:window.tradesymbcount>totallngth?1:window.tradesymbcount,slctsymb=$(".tradetable ul").eq(window.tradesymbcount).find(".tradetablesymb").text(),window.selectedSymbol=""!==slctsymb?slctsymb:null!==slctsymb?slctsymb:window.selectedSymbol,window.seriesTypes="first",window.trendLineType="none",window.trendLinePeriod="",(""!==window.selectedSymbol||null!==window.selectedSymbol)&&igFinance.changeTicker(window.selectedSymbol)});var showData=function(a){var b=JSON.parse(a);$(".trdeloader").hide(),$("#tradesymbolsGrid").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Code",key:"symbol",dataType:"string",width:"20%"},{headerText:"Name",key:"name",dataType:"string",width:"30%"},{headerText:"Open",key:"open",dataType:"string",width:"20%"},{headerText:"High",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Low",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Last",key:"lasttradeamount",dataType:"string",width:"20%"}],dataSource:b.scanning,responseDataKey:"results",features:[{name:"Sorting",type:"local"}]}),0==b.scanning.length&&($("#chartlistdialog .noDataFoundForChartList1").remove(),$("#chartlistdialog .ui-iggrid-table:first").parent().append("<table class='noDataFoundForChartList1'><tr><td style='color:red;font-weight:bold'> No Data Found </td></tr></table>")),$("#perfrmSymbolGrid").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Code",key:"symbol",dataType:"string",width:"20%"},{headerText:"Name",key:"name",dataType:"string",width:"30%"},{headerText:"Open",key:"open",dataType:"string",width:"20%"},{headerText:"High",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Low",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Last",key:"lasttradeamount",dataType:"string",width:"20%"},{headerText:"Triggered Date Share Price",key:"selected_trade_close",dataType:"string",width:"30%"},{headerText:"%(respect of triggered date)",key:"perfget_percent",dataType:"string",width:"30%"}],dataSource:b.performance,responseDataKey:"results",features:[{name:"Sorting",type:"local"}]}),null==b.performance&&($("#chartlistdialog .noDataFoundForChartList2").remove(),$("#chartlistdialog .ui-iggrid-table:last").parent().append("<table class='noDataFoundForChartList2'><tr><td style='color:red;font-weight:bold'> No Data Found </td></tr></table>"))};$("#stockcalculate").click(function(){var a=$("#stocktablechoose").val(),b=$("#chartDateSelect").val();$(".closingdatetrade").html("Closing Date :-"+b+" 4:00 PM"),$("#lbl_progressCounter").html("0"),$(".trdeloader").show();var c=window.setInterval(function(){var a=parseInt($("#lbl_progressCounter").html());a>=90&&(window.clearInterval(c),c=null),a+=1,$("#lbl_progressCounter").html(a)},200);$.get("stockListTrade.php",{selectedDate:b,selectedTable:a}).done(function(a){console.log(a),null!=c&&window.clearInterval(c),c=window.setInterval(function(){var b=parseInt($("#lbl_progressCounter").html());b>=100&&(window.clearInterval(c),c=null,showData(a)),b+=1,$("#lbl_progressCounter").html(b)},20)})}),$(".watchlistsubgroup").each(function(){$(this).find("li:last").addClass("lastChild")}),$(".tabletabslist li").click(function(){$(".tabletabslist li").removeClass("tradetabact"),$(this).addClass("tradetabact"),$(".tabletbscont").hide(),idopen=$(this).attr("data-id"),$("#"+idopen).show()}),$(".average").click(function(){$(this).toggleClass("avgActive"),$(this).hasClass("avgActive")?(window.trendLineType="simpleAverage",window.trendLinePeriod=6):(window.trendLineType="none",window.trendLinePeriod=""),igFinance.changeTicker(window.selectedSymbol)}),$("#watchlistselect").change(function(){watchtable=$(this).val(),(""!=watchtable||null!=watchtable)&&(watchtableval=$("#"+watchtable).val(),watchpipeurl="http://pipes.yahoo.com/pipes/pipe.run?_id=d1a8c7c7885da588a6fc6e497578ff72&_render=json&s="+watchtableval,closingdatearr=[],closingtimearr=[],$.ajax({url:watchpipeurl,context:document.body}).done(function(a){var b=a.value.items;for(var c in b)currclose=b[c].last,prevclose=b[c].prevclose,watchget_percent=parseFloat(parseFloat(currclose-prevclose)/prevclose*100).toFixed(2),watchget_value=parseFloat(currclose-prevclose).toFixed(2),watchget_value=watchget_value>=0?'<label class="upgreen">'+watchget_value+"</label>":'<label class="downred">'+watchget_value+"</label>",b[c].checkvalue=watchget_value,b[c].checkpercentage=watchget_percent,closingdatearr.push(b[c].date),closingtimearr.push(b[c].time);closingdatearr=unique(closingdatearr),closingdatearr.sort(),closingdatearrlnth=closingdatearr.length,closingtimearr=unique(closingtimearr),closingtimearr.sort(),closingtimearrlnth=closingtimearr.length,$(".closingdatewatch").html("Closing Date :-"+closingdatearr[closingdatearrlnth-1]+" 4:00 PM"),console.log(b),$("#grid").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Symbol",key:"symbol",dataType:"string",width:"20%"},{headerText:"Name",key:"name",dataType:"string",width:"20%"},{headerText:"%",key:"checkpercentage",dataType:"number",width:"10%",template:"{{if ${checkpercentage} >= 0 }}<label class='upgreen'> ${checkpercentage} </label> {{else}} <label class='downred'> ${checkpercentage} </label> {{/if}}"},{headerText:"+ / -",key:"checkvalue",dataType:"string",width:"10%"},{headerText:"Open",key:"open",dataType:"number",width:"10%"},{headerText:"High",key:"high",dataType:"number",width:"10%"},{headerText:"Low",key:"low",dataType:"number",width:"10%"},{headerText:"Last",key:"last",dataType:"number",width:"10%"}],dataSource:b,responseDataKey:"results",features:[{name:"Sorting",type:"local"}]})}))});var watchflg=1;$(".watchopen").click(function(){1===watchflg?($(this).css("background-position","0 -7px"),watchflg=0):($(this).css("background-position","0 0"),watchflg=1),$(".accord").slideToggle()}),$(".watchspn").click(function(){$(this).toggleClass("watchspnact"),$(this).parent().next(".watchlistchart").slideToggle()}),$(".watchchartsymb").click(function(a){a.preventDefault(),symbol=$(this).attr("data-symbol"),name=$(this).attr("data-name"),window.trendLineType="none",window.trendLinePeriod="",$("#txtTicker").val(""),$(".watDisplay").html(name+" ( "+symbol+" ) "),$(".watchchartsymb").removeClass("watchSelected"),$(this).addClass("watchSelected"),window.selectedSymbol=symbol,igFinance.changeTicker(symbol)}),$(".wtchSld .next").click(function(a){a.preventDefault(),wnextflag=1,window.react=!1,window.trendLineType="none",window.trendLinePeriod="",$("#txtTicker").val(""),$(".watchchartsymb").each(function(){$(this).hasClass("watchSelected")&&1===wnextflag&&($(".watchchartsymb").removeClass("watchSelected"),cursel=$(".watchchartsymb").index(this),cursel===$(".watchchartsymb").length-1?($(".watchchartsymb :eq(0)").addClass("watchSelected"),symbol=$(".watchSelected").attr("data-symbol"),name=$(".watchSelected").attr("data-name"),$(".watDisplay").html(name+" ( "+symbol+" ) "),window.selectedSymbol=symbol,igFinance.changeTicker(symbol),wnextflag=2):(nextsel=cursel+1,$(".watchchartsymb :eq("+nextsel+")").addClass("watchSelected"),symbol=$(".watchSelected").attr("data-symbol"),name=$(".watchSelected").attr("data-name"),$(".watDisplay").html(name+" ( "+symbol+" ) "),window.selectedSymbol=symbol,igFinance.changeTicker(symbol),wnextflag=2))})}),$(".wtchSld .prev").click(function(a){a.preventDefault(),wprevflag=1,window.react=!1,window.trendLineType="none",window.trendLinePeriod="",$("#txtTicker").val(""),$(".watchchartsymb").each(function(){$(this).hasClass("watchSelected")&&1===wprevflag&&($(".watchchartsymb").removeClass("watchSelected"),cursel=$(".watchchartsymb").index(this),0===cursel?(nextsel=$(".watchchartsymb").length-1,$(".watchchartsymb :eq("+nextsel+")").addClass("watchSelected"),symbol=$(".watchSelected").attr("data-symbol"),name=$(".watchSelected").attr("data-name"),$(".watDisplay").html(name+" ( "+symbol+" ) "),window.selectedSymbol=symbol,igFinance.changeTicker(symbol),wprevflag=2):(nextsel=cursel-1,$(".watchchartsymb :eq("+nextsel+")").addClass("watchSelected"),symbol=$(".watchSelected").attr("data-symbol"),name=$(".watchSelected").attr("data-name"),$(".watDisplay").html(name+" ( "+symbol+" ) "),window.selectedSymbol=symbol,igFinance.changeTicker(symbol),wprevflag=2))})}),$(document).ready(function(){var a=new Date;$("#buyShareDate").datepicker({maxDate:"m w y d",minDate:new Date(1999,0,1),beforeShowDay:$.datepicker.noWeekends,dateFormat:"yy-mm-dd"}),$("#buyShareDate").datepicker("setDate",a),$("#buyShare").click(function(){$("#portfolioMsg").html("Please Wait. Submitting Form.");var a=$("#shareSymbol").val(),b=$("#buyShareDate").val(),c=$("#sellType").val();$.ajax({url:"myportfolio.php",type:"post",data:{shareSymbol:a,buyDate:b,sellType:c}}).done(function(a){console.log(a),getDataAndDisplayInEquityPositionsOpen(),$("#portfolioMsg").html("New Data Has been added.")}).error(function(){$("#portfolioMsg").html("Something went wrong! Please try again later.")})}),$(".equity_open").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Date",key:"symbol",dataType:"string",width:"20%"},{headerText:"Code",key:"name",dataType:"string",width:"30%"},{headerText:"Company",key:"open",dataType:"string",width:"20%"},{headerText:"QTY Stock",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Avg. Price",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Last Price",key:"lasttradeamount",dataType:"string",width:"20%"},{headerText:"Investment",key:"selected_trade_close",dataType:"string",width:"30%"},{headerText:"Total Value",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Brokerage",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Sector",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Weighting in Sector",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Weighting Cash + Portfoliio Net",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Weighting Portfolio Net",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Total",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"% Gain",key:"perfget_percent",dataType:"string",width:"30%"}],responseDataKey:"results",features:[{name:"Sorting",type:"local"}]}),$(".sold_open").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Date",key:"symbol",dataType:"string",width:"20%"},{headerText:"Code",key:"name",dataType:"string",width:"30%"},{headerText:"Company",key:"open",dataType:"string",width:"20%"},{headerText:"QTY Stock",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Avg. Price",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Contracts",key:"lasttradeamount",dataType:"string",width:"20%"},{headerText:"Investment",key:"selected_trade_close",dataType:"string",width:"30%"},{headerText:"Brokerage",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"ACH Fees",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Strike",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Call Strike Cap Nett",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Original Investme nt +/- Inc costs",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Gain + / - if Exercised",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"% + / - if Exercised",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"% Gain",key:"perfget_percent",dataType:"string",width:"30%"}],responseDataKey:"results",features:[{name:"Sorting",type:"local"}]}),$(".equity_closed").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Date Buy",key:"symbol",dataType:"string",width:"20%"},{headerText:"Date Sell",key:"name",dataType:"string",width:"30%"},{headerText:"Company",key:"open",dataType:"string",width:"20%"},{headerText:"QTY Stock",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Avg. Purchase Price",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Sale Price",key:"lasttradeamount",dataType:"string",width:"20%"},{headerText:"Investment",key:"selected_trade_close",dataType:"string",width:"30%"},{headerText:"Investme nt Value at sale",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Brokerage Buy",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Brokerage Sell",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"",key:"",dataType:"string",width:"30%"},{headerText:"",key:"",dataType:"string",width:"30%"},{headerText:"",key:"",dataType:"string",width:"30%"},{headerText:"Total",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"% Gain",key:"perfget_percent",dataType:"string",width:"30%"}],responseDataKey:"results",features:[{name:"Sorting",type:"local"}]}),$(".option_positionsC").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Date",key:"symbol",dataType:"string",width:"20%"},{headerText:"Buy / Expiry Date",key:"name",dataType:"string",width:"30%"},{headerText:"Company",key:"open",dataType:"string",width:"20%"},{headerText:"QTY",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Sell Price",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Contracts",key:"lasttradeamount",dataType:"string",width:"20%"},{headerText:"Buy Price",key:"selected_trade_close",dataType:"string",width:"30%"},{headerText:"Option Income",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Expired Value",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Brokerage SELL",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Brokerage BUY",key:"Brokerage_BUY",dataType:"string",width:"30%"},{headerText:"ACH Fees Sell",key:"ACH_Fees_Sell",dataType:"string",width:"30%"},{headerText:"ACH Fees Buy",key:"ACH_Fees_Buy",dataType:"string",width:"30%"},{headerText:"Total",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"% Gain",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"$ Gain",key:"perfget_percent",dataType:"string",width:"30%"}],responseDataKey:"results",features:[{name:"Sorting",type:"local"}]}),$(".dividends_received_inner").igGrid({autoGenerateColumns:!1,width:"100%",columns:[{headerText:"Ex Div",key:"symbol",dataType:"string",width:"20%"},{headerText:"Code",key:"name",dataType:"string",width:"30%"},{headerText:"Company",key:"open",dataType:"string",width:"20%"},{headerText:"QTY Stock",key:"daillyhigh",dataType:"string",width:"20%"},{headerText:"Dividend",key:"dailylow",dataType:"string",width:"20%"},{headerText:"Total",key:"lasttradeamount",dataType:"string",width:"20%"},{headerText:"Franking Percent",key:"selected_trade_close",dataType:"string",width:"30%"},{headerText:"Pay Date",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Comments",key:"perfget_percent",dataType:"string",width:"30%"},{headerText:"Total",key:"perfget_percent",dataType:"string",width:"30%"}],responseDataKey:"results",features:[{name:"Sorting",type:"local"}]})});